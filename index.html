<!DOCTYPE html>
<html lang="es">
	<head>
		<title>Pintar Caracter</title>
		<meta charset="utf-8">
		<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
		<style type="text/css">
		
		
      body{ text-align: center; }
#dataset{
  width:600px;
  height:750px;
  margin:auto;
  background: #eee;
  display :none;
  tr{
    td{
      width: 25px;
      height: 25px;
      border:1px solid #eee;
      background: steelblue;
      font-weight:bold;
      text-align:right;
    }
  }
}
#mytab1{
  display: inline-block;
  margin: auto;
  background: #eee;
}
td{
  width: 25px;
  height: 25px;
  border-style: solid;
  border-width: 1px;
  border-color: Teal;
}
#reset{
  margin: auto;
}
.container{
  border: 1px solid none;
}
.micontenedor{
  width:50px;
  heigth:50px;
  border:1px solid red;
  padding:1.5em;
}
#inputTextToSave{
  /*display: none;*/
  width:70%;
}
		
		</style>
	</head>
	<body>

    <div class="container">
  <h2>Dibujar Caracter</h2>
  <table id="mytab1">
    <tbody><tr>
      <td class="rnd" style="background-color: black;"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
    <tr>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
      <td class="rnd"></td>
    </tr>
  </tbody></table>
  <br>
  <select id="sel">
    <option value="click">Click</option>
    <option value="mouseover">Over</option>
  </select>
  <button id="reset">Reset!</button>
  <button id="calcular">Calcular</button>
  <label type="text" id=""></label>
  <br>
  <br>
  <label>Estilo: </label><input type="text" id="estilo" style="width:30px;">
  <label>Letra: </label><input type="text" id="letra" style="width:30px;">
  <br>
<br>
<input type="button" id="opcionDataset" value="Mostrar Dataset">
<input type="button" id="opcion" value="Mostrar Opciones">
<div class="opciones">
  <br>
  <textarea id="inputTextToSave" style="width: 1267px; height: 30px; margin: 0px;">  </textarea><br>
  <label>Nombre del archivo:</label>
  <input id="inputFileNameToSaveAs">
  <button onclick="saveTextAsFile()">Guardar</button><br>
  <label>Buscar en el Ordenador:</label>
  <input type="file" id="fileToLoad">
  <button onclick="loadFileAsText()">Leer Archivo</button>
</div>
  
</div>
<table id="myTable">
</table>
      <script src="//assets.codepen.io/assets/common/stopExecutionOnTimeout-f961f59a28ef4fd551736b43f94620b5.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

        <script>
      var dataset = [];
for (var i = 0; i < 45; i++) {
    if (window.CP.shouldStopExecution(2)) {
        break;
    }
    dataset[i] = [];
    for (var j = 0; j < 49; j++) {
        if (window.CP.shouldStopExecution(1)) {
            break;
        }
        dataset[i][j] = 0;
    }
    window.CP.exitedLoop(1);
}
window.CP.exitedLoop(2);
$(document).ready(main);
function main() {
    $('.rnd').off('click');
    $('.rnd').off('mouseover');
    $('#sel').change(main);
    $('.rnd').on($('#sel').val(), changeColor);
    $('#reset').click(function () {
        $('.rnd').css('background-color', '#eee');
        $('#pintar').text('');
    });
    $('#calcular').click(function () {
        var caracter = [];
        var cont = 0;
        for (var i = 0; i < document.getElementById('mytab1').rows.length; i++) {
            if (window.CP.shouldStopExecution(4)) {
                break;
            }
            for (var j = 0; j < document.getElementById('mytab1').rows[i].cells.length; j++) {
                if (window.CP.shouldStopExecution(3)) {
                    break;
                }
                if (document.getElementById('mytab1').rows[i].cells[j].style.backgroundColor == 'black') {
                    caracter[cont] = 1;
                    cont++;
                } else {
                    caracter[cont] = -1;
                    cont++;
                }
            }
            window.CP.exitedLoop(3);
        }
        window.CP.exitedLoop(4);
        var letra = document.getElementById('letra').value;
        var estilo = parseInt(document.getElementById('estilo').value);
        var f = 0;
        var c = 0;
        switch (estilo) {
        case 1:
            f = 0;
            break;
        case 2:
            f = 9;
            break;
        case 3:
            f = 18;
            break;
        case 4:
            f = 27;
            break;
        case 5:
            f = 36;
            break;
        }
        switch (letra) {
        case 'a':
            c = 0;
            break;
        case 'b':
            c = 7;
            break;
        case 'c':
            c = 14;
            break;
        case 'd':
            c = 21;
            break;
        case 'e':
            c = 28;
            break;
        case 'f':
            c = 35;
            break;
        case 'k':
            c = 42;
            break;
        }
        var tamI = f + 9;
        var tamJ = c + 7;
        var textitos = '';
        var contCaracterJ = 0;
        for (var i = f; i < tamI; i++) {
            if (window.CP.shouldStopExecution(6)) {
                break;
            }
            for (var j = c; j < tamJ; j++) {
                if (window.CP.shouldStopExecution(5)) {
                    break;
                }
                dataset[i][j] = caracter[contCaracterJ];
                textitos += dataset[i][j] + ' ';
                contCaracterJ++;
            }
            window.CP.exitedLoop(5);
        }
        window.CP.exitedLoop(6);
        document.getElementById('myTable').innerHTML = '';
        var table = document.getElementById('myTable');
        for (var i = 0; i < 45; i++) {
            var row = table.insertRow(i);
            for (var j = 0; j < 49; j++) {
                var cell = row.insertCell(j);
                cell.innerHTML = dataset[i][j];
            }
        }
    });
}
function changeColor() {
    $(this).css('background-color', 'black');
}
function llenarTextArea(texto) {
    document.getElementById('inputTextToSave').value = texto;
}
function saveTextAsFile() {
    var texto = '';
    for (var i = 0; i < 45; i++) {
        if (window.CP.shouldStopExecution(8)) {
            break;
        }
        for (var j = 0; j < 49; j++) {
            if (window.CP.shouldStopExecution(7)) {
                break;
            }
            texto += dataset[i][j] + ' ';
        }
        texto += '\n';
        llenarTextArea(texto);
        window.CP.exitedLoop(7);
    }
    window.CP.exitedLoop(8);
    var textToWrite = document.getElementById('inputTextToSave').value;
    var textFileAsBlob = new Blob([textToWrite], { type: 'text/plain' });
    var fileNameToSaveAs = document.getElementById('inputFileNameToSaveAs').value;
    var downloadLink = document.createElement('a');
    downloadLink.download = fileNameToSaveAs;
    downloadLink.innerHTML = 'Download File';
    if (window.webkitURL != null) {
        downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
    } else {
        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
        downloadLink.onclick = destroyClickedElement;
        downloadLink.style.display = 'none';
        document.body.appendChild(downloadLink);
    }
    downloadLink.click();
}
function destroyClickedElement(event) {
    document.body.removeChild(event.target);
}
function loadFileAsText() {
    var fileToLoad = document.getElementById('fileToLoad').files[0];
    var fileReader = new FileReader();
    fileReader.onload = function (fileLoadedEvent) {
        var textFromFileLoaded = fileLoadedEvent.target.result;
        document.getElementById('inputTextToSave').value = textFromFileLoaded;
    };
    fileReader.readAsText(fileToLoad, 'UTF-8');
    var stringArray = document.getElementById('inputTextToSave').value.split('\n');
    console.log(stringArray[1]);
}
$('#opcion').click(function () {
    $('.opciones').toggle();
});
$('#opcionDataset').click(function () {
    $('#myTable').toggle();
});
function perceptron() {
    var inputs = [
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        -1,
        1,
        1,
        1,
        1
    ];
    var x = [];
    var y = [];
    var bias = [
        0,
        0,
        0,
        0,
        0,
        0,
        0
    ];
    var w = [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0
    ];
    var t = [
        [
            1,
            -1,
            -1,
            -1,
            -1,
            -1,
            -1
        ],
        [
            -1,
            1,
            -1,
            -1,
            -1,
            -1,
            -1
        ],
        [
            -1,
            -1,
            1,
            -1,
            -1,
            -1,
            -1
        ],
        [
            -1,
            -1,
            -1,
            1,
            -1,
            -1,
            -1
        ],
        [
            -1,
            -1,
            -1,
            -1,
            1,
            -1,
            -1
        ],
        [
            -1,
            -1,
            -1,
            -1,
            -1,
            1,
            -1
        ],
        [
            -1,
            -1,
            -1,
            -1,
            -1,
            -1,
            1
        ]
    ];
    var umbral = 1000;
    var y_in = [];
    var suma = 0;
    var cond = false;
    var msg = '';
    var n = 63;
    var m = 7;
    while (cond == true) {
        if (window.CP.shouldStopExecution(14)) {
            break;
        }
        for (var i = 0; i < n; i++) {
            if (window.CP.shouldStopExecution(9)) {
                break;
            }
            x[i] = inputs[i];
            suma += x[i] * w[i];
            if (umbral >= x[i] * w[i]) {
                umbral = x[i] * w[i];
            }
        }
        for (var j = 0; j < m; j++) {
            if (window.CP.shouldStopExecution(10)) {
                break;
            }
            y_in[j] = bias[j] + suma;
            var tot = y_in[j];
            if (tot > umbral) {
                y[j] = 1;
            } else {
                if (tot >= umbral && tot <= umbral) {
                    y[j] = 0;
                } else {
                    y[j] = -1;
                }
            }
        }
        window.CP.exitedLoop(10);
        console.log(' +++++++++ ');
        for (var j = 0; j < m; j++) {
            if (window.CP.shouldStopExecution(13)) {
                break;
            }
            for (var k = 0; k < m; k++) {
                if (window.CP.shouldStopExecution(12)) {
                    break;
                }
                for (var i = 0; i < n; i++) {
                    if (window.CP.shouldStopExecution(11)) {
                        break;
                    }
                    if (t[j] != y[j]) {
                        bias[j] = bias[j] + t[j][k];
                        w[i] = w[i] + t[j][k] * x[i];
                        console.log(w[i] + ' ' + bias[j]);
                    } else {
                        w[i] = w[i];
                        bias[j] = bias[j];
                        cond = true;
                    }
                }
                window.CP.exitedLoop(11);
            }
            console.log('-------- ');
            window.CP.exitedLoop(12);
        }
        window.CP.exitedLoop(13);
        console.log('-------- ');
        window.CP.exitedLoop(9);
    }
    window.CP.exitedLoop(14);
    console.log('estoy afuera');
}
perceptron();
      //@ sourceURL=pen.js
    </script>

    
    <script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>

    
  
	</body>
</html>
